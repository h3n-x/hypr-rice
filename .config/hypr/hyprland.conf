##############################
# Configuración Hyprland IA  #
##############################
ecosystem:no_update_news = true

#############################
### ENVIRONMENT VARIABLES ###
#############################

# Variables de entorno para AMD/Mesa (optimizadas)
env = LIBVA_DRIVER_NAME,radeonsi
env = __GLX_VENDOR_LIBRARY_NAME,mesa
env = GBM_BACKEND,drm
env = __GL_GSYNC_ALLOWED,1
env = __GL_VRR_ALLOWED,1
env = WLR_NO_HARDWARE_CURSORS,1
env = WLR_RENDERER_ALLOW_SOFTWARE,1

# Wayland y aplicaciones
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = MOZ_ENABLE_WAYLAND,1
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_QPA_PLATFORMTHEME,qt5ct
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = GDK_BACKEND,wayland,x11,*
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = DRI_PRIME,0

# Cursor
env = XCURSOR_THEME,Bibata-Wal
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

# Rendimiento
env = __GL_THREADED_OPTIMIZATIONS,1
env = __GL_SHADER_DISK_CACHE,1
env = __GL_SHADER_DISK_CACHE_SKIP_CLEANUP,1

################
### MONITORS ###
################
monitor = eDP-1, 1920x1080@144, 0x0, 1
monitor = HDMI-A-1, 1920x1080@75, 1920x0, 1
monitor = ,addreserved,0,0,0,0

###################
### MY PROGRAMS ###
###################
$terminal = kitty
$menu = rofi -show drun --disable-history -theme /home/h3n/.config/rofi/config.rasi
$browser = firefox
$editor = code

#################
### AUTOSTART ###
#################
exec-once = swww-daemon
exec-once = hypridle
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/lib/xdg-desktop-portal-hyprland
exec-once = ~/.config/hypr/scripts/vpn-connect.sh r
exec-once = ~/.config/waybar/launch.sh

# Configuración de cursor y fuentes (optimizada)
exec-once = hyprctl setcursor Bibata-Wal 24
exec-once = gsettings set org.gnome.desktop.interface cursor-theme 'Bibata-Wal'
exec-once = gsettings set org.gnome.desktop.interface cursor-size 24
exec-once = gsettings set org.gnome.desktop.interface font-name 'Inter 10'
exec-once = gsettings set org.gnome.desktop.interface document-font-name 'Inter 10'
exec-once = gsettings set org.gnome.desktop.interface monospace-font-name 'JetBrainsMono Nerd Font Mono 10'
exec-once = gsettings set org.gnome.desktop.interface font-antialiasing 'rgba'
exec-once = gsettings set org.gnome.desktop.interface font-hinting 'full'

#####################
### LOOK & FEEL   ###
#####################
general {
    gaps_in = 5
    gaps_out = 20
    border_size = 2
    col.active_border = rgba(5E48A5ff)
    col.inactive_border = rgba(3F2D81ff)
    resize_on_border = true
    extend_border_grab_area = 15
    hover_icon_on_border = true
    allow_tearing = true
    layout = dwindle
}

decoration {
    rounding = 12
    active_opacity = 1.0
    inactive_opacity = 0.95
    fullscreen_opacity = 1.0
    
    
    blur {
        enabled = true
        size = 8
        passes = 3
        new_optimizations = true
        xray = false
        ignore_opacity = false
        noise = 0.0117
        contrast = 1.1
        brightness = 1.2
        vibrancy = 0.2
        vibrancy_darkness = 0.0
        special = false
        popups = true
        popups_ignorealpha = 0.2
    }
    
    # Sombreado de ventanas
    dim_inactive = false
    dim_strength = 0.1
    dim_special = 0.5
    dim_around = 0.4    
}

animations {
    enabled = true
    first_launch_animation = true
    
    # Bezier curves optimizadas
    bezier = fluent_decel, 0, 0.2, 0.4, 1
    bezier = easeOutCirc, 0, 0.55, 0.45, 1
    bezier = easeOutCubic, 0.33, 1, 0.68, 1
    bezier = easeInOutCubic, 0.65, 0, 0.35, 1
    bezier = linear, 0, 0, 1, 1
    bezier = almostLinear, 0.5, 0.5, 0.75, 1.0
    bezier = quick, 0.15, 0, 0.1, 1
    
    # Animaciones de ventanas mejoradas
    animation = windows, 1, 4, easeOutCubic, slide
    animation = windowsIn, 1, 4, easeOutCubic, slide
    animation = windowsOut, 1, 4, quick, slide
    animation = windowsMove, 1, 4, fluent_decel, slide
    
    # Fading suave
    animation = fade, 1, 3, easeOutCubic
    animation = fadeIn, 1, 3, easeOutCubic
    animation = fadeOut, 1, 3, quick
    animation = fadeSwitch, 1, 5, easeInOutCubic
    animation = fadeShadow, 1, 5, easeInOutCubic
    animation = fadeDim, 1, 4, fluent_decel
    animation = border, 1, 2.7, easeOutCirc
    animation = borderangle, 1, 30, fluent_decel, once
    animation = workspaces, 1, 4, easeOutCubic, slide
    animation = specialWorkspace, 1, 3, easeInOutCubic, slidevert
}

# Layout Dwindle optimizado
dwindle {
    pseudotile = true
    preserve_split = true
    smart_split = true
    smart_resizing = true
    force_split = 0
    split_width_multiplier = 1.0
    use_active_for_splits = true
    default_split_ratio = 1.0
}

# Layout Master mejorado
master {
    allow_small_split = true
    special_scale_factor = 0.8
    mfact = 0.55
    new_status = master
    new_on_top = false
    orientation = left
    inherit_fullscreen = true
    smart_resizing = true
    drop_at_cursor = true
}

# Configuraciones misceláneas optimizadas
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    col.splash = rgba(ffffffff)
    splash_font_family = Inter
    force_default_wallpaper = 0
    vfr = true
    vrr = 1
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
    always_follow_on_dnd = true
    layers_hog_keyboard_focus = true
    animate_manual_resizes = true
    animate_mouse_windowdragging = true
    disable_autoreload = false
    enable_swallow = true
    swallow_regex = ^(kitty|Alacritty)$
    swallow_exception_regex = ^(wev)$
    focus_on_activate = true
    mouse_move_focuses_monitor = true
    allow_session_lock_restore = false
    background_color = rgba(111111ff)
    close_special_on_empty = true
    middle_click_paste = true
}

#############
### INPUT ###
#############
input {
    kb_model = pc105
    kb_layout = us
    kb_variant = 
    kb_options = 
    kb_rules = 
    kb_file = 
    
    follow_mouse = 1
    mouse_refocus = true
    float_switch_override_focus = 2
    
    touchpad {
        natural_scroll = true
        disable_while_typing = true
        tap-to-click = true
        drag_lock = false
        tap-and-drag = false
        scroll_factor = 1.0
        middle_button_emulation = false
        clickfinger_behavior = false
    }
    
    sensitivity = 1
    accel_profile = flat
    force_no_accel = false
    left_handed = false
    scroll_method = 2fg
    scroll_button = 0
    natural_scroll = false
    numlock_by_default = false
}

# Gestos mejorados
gestures {
    workspace_swipe = true
    workspace_swipe_fingers = 3
    workspace_swipe_distance = 300
    workspace_swipe_invert = true
    workspace_swipe_min_speed_to_force = 30
    workspace_swipe_cancel_ratio = 0.5
    workspace_swipe_create_new = true
    workspace_swipe_direction_lock = true
    workspace_swipe_direction_lock_threshold = 10
    workspace_swipe_forever = false
    workspace_swipe_use_r = false
}

# Configuración de binds
binds {
    pass_mouse_when_bound = false
    scroll_event_delay = 300
    workspace_back_and_forth = false
    allow_workspace_cycles = true
    workspace_center_on = 0
    focus_preferred_method = 0
    ignore_group_lock = false
    movefocus_cycles_fullscreen = true
}

# Configuración de grupo
group {
    insert_after_current = true
    focus_removed_window = true
    col.border_active = rgba(C2817Cff) rgba(A67C7Aff) 45deg
    col.border_inactive = rgba(705452ff)
    col.border_locked_active = rgba(C2817Cff) rgba(A67C7Aff) 45deg
    col.border_locked_inactive = rgba(705452ff)
    groupbar {
        enabled = true
        font_family = Inter
        font_size = 8
        gradients = true
        height = 14
        priority = 3
        render_titles = true
        scrolling = true
        text_color = rgba(ffffffff)
        col.active = rgba(C2817Cff)
        col.inactive = rgba(705452ff)
        col.locked_active = rgba(C2817Cff)
        col.locked_inactive = rgba(705452ff)
    }
}

###################
### KEYBINDINGS ###
###################
$mainMod = SUPER

# Aplicaciones principales
bind = $mainMod, T, exec, $terminal
bind = $mainMod, F, exec, $browser
bind = $mainMod, R, exec, $menu
bind = $mainMod, C, exec, $editor
bind = $mainMod, S, exec, spotify-launcher
bind = CTRL SHIFT, R, exec, hyprctl reload
bind = CTRL SHIFT, N, exec, swaync-client -t -sw
bind = $mainMod SHIFT, N, exec, ~/.config/swaync/scripts/reload-swaync.sh

# Gestión de ventanas
bind = $mainMod, Q, exec, ~/.config/hypr/scripts/dontkillsteam.sh
bind = ALT, F4, exec, ~/.config/hypr/scripts/dontkillsteam.sh
bind = $mainMod, W, togglefloating,
bind = $mainMod, P, pseudo,
bind = $mainMod, J, togglesplit,
bind = $mainMod, G, togglegroup,
bind = $mainMod SHIFT, G, changegroupactive,
bind = ALT, return, fullscreen,
bind = $mainMod, M, fullscreen, 1
bind = CTRL SHIFT, S, exec, ~/.config/hypr/scripts/wallpaper-selector.sh

# Sesión
bind = $mainMod, X, exec, wlogout
bind = $mainMod, L, exec, ~/.config/hypr/scripts/lock_screen.sh
bind = $mainMod SHIFT, F, exec, firefox --private-window

# Screenshots mejorados
bind = , print, exec, flameshot gui
bind = $mainMod, print, exec, flameshot full -p ~/Pictures/Screenshots
bind = $mainMod SHIFT, print, exec, flameshot screen -p ~/Pictures/Screenshots

# Navegación de ventanas
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d
bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d
bind = ALT, Tab, cyclenext,
bind = ALT SHIFT, Tab, cyclenext, prev

# Workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Mover ventanas a workspaces
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Mover ventanas silenciosamente
bind = $mainMod ALT, 1, movetoworkspacesilent, 1
bind = $mainMod ALT, 2, movetoworkspacesilent, 2
bind = $mainMod ALT, 3, movetoworkspacesilent, 3
bind = $mainMod ALT, 4, movetoworkspacesilent, 4
bind = $mainMod ALT, 5, movetoworkspacesilent, 5

# Workspace especial
bind = $mainMod, Z, togglespecialworkspace, magic
bind = $mainMod SHIFT, Z, movetoworkspace, special:magic

# Redimensionar ventanas
binde = $mainMod SHIFT, right, resizeactive, 10 0
binde = $mainMod SHIFT, left, resizeactive, -10 0
binde = $mainMod SHIFT, up, resizeactive, 0 -10
binde = $mainMod SHIFT, down, resizeactive, 0 10
binde = $mainMod SHIFT, L, resizeactive, 10 0
binde = $mainMod SHIFT, H, resizeactive, -10 0
binde = $mainMod SHIFT, K, resizeactive, 0 -10
binde = $mainMod SHIFT, J, resizeactive, 0 10

# Mover ventanas
bind = $mainMod CTRL, left, movewindow, l
bind = $mainMod CTRL, right, movewindow, r
bind = $mainMod CTRL, up, movewindow, u
bind = $mainMod CTRL, down, movewindow, d
bind = $mainMod CTRL, H, movewindow, l
bind = $mainMod CTRL, L, movewindow, r
bind = $mainMod CTRL, K, movewindow, u
bind = $mainMod CTRL, J, movewindow, d

# Navegación de workspaces con mouse
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Mouse bindings
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Teclas multimedia
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.4 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-

# Control de reproducción
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

##############################
### WINDOWS AND WORKSPACES ###
##############################

# Reglas de workspace
windowrulev2 = workspace 1,class:^(firefox)$
windowrulev2 = workspace 1,class:^(librewolf)$
windowrulev2 = workspace 2,class:^(kitty)$
windowrulev2 = workspace 3,class:^(code)$
windowrulev2 = workspace 3,class:^(cursor)$
windowrulev2 = workspace 3,class:^(jetbrains-idea)$
windowrulev2 = workspace 3,class:^(obsidian)$
windowrulev2 = workspace 4,class:^(obs)$
windowrulev2 = workspace 4,class:^(discord)$
windowrulev2 = workspace 5,class:^(Spotify)$
windowrulev2 = workspace 5,class:^(spotify-launcher)$

# Reglas de opacidad
windowrulev2 = opacity 0.85 0.85,class:^(firefox)$
windowrulev2 = opacity 0.85 0.85,class:^(Spotify)$
windowrulev2 = opacity 0.85 0.85,class:^(kitty)$
windowrulev2 = opacity 0.85 0.85,class:^(code)$
windowrulev2 = opacity 0.85 0.85,class:^(cursor)$
windowrulev2 = opacity 0.85 0.85,class:^(discord)$
windowrulev2 = opacity 0.85 0.85,class:^(rofi)$
windowrulev2 = opacity 0.85 0.85,class:^(jetbrains-idea)$
windowrulev2 = opacity 0.85 0.85,class:^(obsidian)$

# Reglas de flotación
windowrulev2 = float,class:^(qt5ct)$
windowrulev2 = float,class:^(nwg-look)$
windowrulev2 = float,class:^(pavucontrol)$
windowrulev2 = float,class:^(org.kde.polkit-kde-authentication-agent-1)$
windowrulev2 = float,class:^(mousepad)$
windowrulev2 = float,class:^(flameshot)$
windowrulev2 = float,class:^(viewnior)$
windowrulev2 = float,class:^(file-roller)$
windowrulev2 = float,class:^(blueman-manager)$

# Reglas de tamaño para ventanas flotantes
windowrulev2 = size 800 600,class:^(pavucontrol)$
windowrulev2 = size 1000 700,class:^(qt5ct)$
windowrulev2 = size 900 600,class:^(blueman-manager)$

# Reglas especiales
windowrulev2 = pin,class:^(showmethekey-gtk)$
windowrulev2 = float,class:^(showmethekey-gtk)$
windowrulev2 = noborder,class:^(showmethekey-gtk)$
windowrulev2 = nofocus,class:^(showmethekey-gtk)$
windowrulev2 = noblur,class:^(showmethekey-gtk)$
windowrulev2 = noshadow,class:^(showmethekey-gtk)$

# Reglas para aplicaciones de sistema
windowrulev2 = float,class:^(org.kde.polkit-kde-authentication-agent-1)$
windowrulev2 = center,class:^(org.kde.polkit-kde-authentication-agent-1)$
windowrulev2 = stayfocused,class:^(org.kde.polkit-kde-authentication-agent-1)$

# Reglas para mejorar rendimiento
windowrulev2 = immediate,class:^(steam_app_).*
windowrulev2 = immediate,class:^(gamescope)$

# Reglas de focus mejoradas
windowrulev2 = stayfocused,class:^(rofi)$
windowrulev2 = stayfocused,floating:1

##############################
### XWAYLAND Y RENDIMIENTO ###
##############################
xwayland {
    use_nearest_neighbor = false
    force_zero_scaling = false
}

opengl {
    nvidia_anti_flicker = false
}

render {
    direct_scanout = true
    expand_undersized_textures = false
}

cursor {
    sync_gsettings_theme = true
    no_hardware_cursors = false
    min_refresh_rate = 24
    hotspot_padding = 1
    inactive_timeout = 1
    enable_hyprcursor = true
    hide_on_key_press = false
    hide_on_touch = true
    use_cpu_buffer = false
    zoom_factor = 1.0
    zoom_rigid = false
}

debug {
    overlay = false
    damage_blink = false
    disable_logs = true
    disable_time = true
    damage_tracking = 2
    enable_stdout_logs = false
    manual_crash = 0
    suppress_errors = false
    disable_scale_checks = false
    error_limit = 5
    error_position = 0
}


